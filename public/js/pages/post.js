$((function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"').attr("content")}}),$.fn.modal.Constructor.prototype._enforceFocus=function(){};var e=$("#table-posts").DataTable({order:[[0,"DESC"]],processing:!0,serverSide:!0,ajax:{url:base_url+"/post/datatable",dataType:"json",type:"POST",data:function(e){var t=$("#tglFilterField").val(),a=$("#titleContentFilter").val(),r=$("#catFilter").val(),i=$("#tagFilter").val(),l=$("#userFilter").val(),n=$("#statusFilter").val();e.tglFilter=t,e.titleContentFilter=a,e.catFilter=r,e.tagFilter=i,e.userFilter=l,e.statusFilter=n}},error:function(e,a,r){if(e.responseJSON.data){var i=e.responseJSON.data.error;Swal.fire({icon:"error",title:" <br>Copy error dan hubungi Programmer!",html:'<div class="alert alert-danger text-left" role="alert"><p>Error Message: <strong>'+i+"</strong></p></div>",allowOutsideClick:!1,showConfirmButton:!0}).then((function(){t()}))}else{var l=e.responseJSON.message,n=e.responseJSON.line,o=e.responseJSON.file;Swal.fire({icon:"error",title:" <br>Copy error dan hubungi Programmer!",html:'<div class="alert alert-danger text-left" role="alert"><p>Error Message: <strong>'+l+"</strong></p><p>File: "+o+"</p><p>Line: "+n+"</p></div>",allowOutsideClick:!1,showConfirmButton:!0}).then((function(){t()}))}},columns:[{data:"no"},{data:"title"},{data:"post_created_by"},{data:"category_name"},{data:"tags"},{data:"published_date"},{data:"status"},{data:"action"}],columnDefs:[{orderable:!1,targets:[0,1,-1,-4]},{targets:[-1],createdCell:function(e,t,a,r,i){$(e).addClass("text-center")}}]});function t(){e.search("").draw()}$("#table-posts_filter input").off(),$("#table-posts_filter input").on("keyup",(function(t){"Enter"==t.code&&e.search(this.value).draw()}));var a=document.getElementById("btn-postReload");function r(){$("#modalFilter").modal("hide")}function i(){$("#tagFilter").select2({theme:"bootstrap4",minimumInputLength:3,placeholder:"Pilih Tag",allowClear:!0,ajax:{url:base_url+"/ajax/post/tags",dataType:"json",quietMillis:100,data:function(e){return{search:e.term}},processResults:function(e,t){return{results:e}}}}).on("select2:select",(function(e){}))}function l(){$("#formFilter")[0].reset(),$("#catFilter").val("").trigger("change"),$("#tagFilter").empty(),i(),$("#tglFilterField").val(""),$("#tglFilter").data("daterangepicker").setStartDate(new Date),$("#tglFilter").data("daterangepicker").setEndDate(new Date);var e=$("#resetFilter").data("pagetitle");$("#titlePost").empty().append(e)}a&&a.addEventListener("click",(function(){t()})),$("#btn-filter").on("click",(function(){i(),$("#modalFilter").modal({show:!0,backdrop:"static",keyboard:!1})})),$(".closeFilter").on("click",(function(){r()})),$("#tglFilter").daterangepicker({maxDate:moment().format("DD/MM/YYYY"),autoUpdateInput:!1,locale:{format:"DD/MM/YYYY"}},(function(e,t,a){var r=e.format("DD/MM/YYYY")+" - "+t.format("DD/MM/YYYY");$("#tglFilterField").val(r)})),$("#btn-resetFilterReload").on("click",(function(){l(),t()})),$("#resetFilter").on("click",(function(){l()})),$("#btn-proFilter").on("click",(function(){e.search("").draw();var t=$(this).data("pagetitle");$("#titlePost").empty().append("Filtered "+t),r()})),tinymce.init({height:"1000",selector:"textarea#content",plugins:"advlist code table lists autolink link image charmap preview anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking save table directionality emoticons template",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullscreen | forecolor backcolor emoticons | help",file_picker_callback:function(e,t,a){var r=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,i=window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight,l="/filemanager?editor="+a.fieldname;"image"==a.filetype?l+="&type=Images":l+="&type=Files",tinyMCE.activeEditor.windowManager.openUrl({url:l,title:"Filemanager",width:.8*r,height:.8*i,resizable:"yes",close_previous:"no",onMessage:function(t,a){e(a.content)}})}}),$("#categories,#catFilter").select2({theme:"bootstrap4",placeholder:"Select Category",allowClear:!0}),$("#tags").select2({theme:"bootstrap4",minimumInputLength:3,multiple:!0,allowClear:!0,tags:!0,ajax:{url:base_url+"/ajax/post/tags",dataType:"json",quietMillis:100,data:function(e){return{search:e.term}},processResults:function(e,t){return{results:e}}}}).on("select2:select",(function(e){})),$("#inputFoto").filemanager("image"),$("#published_date").datetimepicker({minDate:moment().format("YYYY-MM-DD HH:mm:ss"),sideBySide:!0,defaultDate:moment().format("YYYY-MM-DD HH:mm:ss"),icons:{time:"far fa-clock",date:"far fa-calendar-alt"},format:"DD-MM-YYYY HH:mm:ss",useCurrent:!1}),$("#formPost").on("submit",(function(e){e.preventDefault(),Swal.fire({imageUrl:base_url+"/images/loading.gif",imageHeight:300,showConfirmButton:!1,title:"Loading ...",allowOutsideClick:!1});var t=new FormData($("#formPost")[0]),a=$("#formPost").attr("action");$.ajax({url:a,type:"POST",data:t,contentType:!1,processData:!1,dataType:"JSON",success:function(e){Swal.fire({icon:"success",title:e.meta.message,showConfirmButton:!1,timer:2e3,allowOutsideClick:!1}).then((function(){window.location.replace("/post")}))},error:function(e,t,a){if(e.responseJSON.data.errorValidator){var r=e.responseJSON.data.errorValidator,i=e.responseJSON.message,l="";$.each(r,(function(e,t){l+="<li>"+t+"</li>"})),Swal.fire({icon:"error",title:i,html:'<div class="alert alert-danger text-left" role="alert"><ul>'+l+"</ul></div>",footer:"Pastikan data yang anda masukkan sudah benar!",allowOutsideClick:!1,showConfirmButton:!0})}else{i=e.responseJSON.meta.message;var n=e.responseJSON.data;Swal.fire({icon:"error",title:i+" <br>Copy error dan hubungi Programmer!",html:'<div class="alert alert-danger text-left" role="alert"><p>Error Message: <strong>'+i+"</strong></p><p>Error: "+n.error+"</p></div>",allowOutsideClick:!1,showConfirmButton:!0})}}})})),$("#table-posts").on("click",".btnStatus",(function(){var e=this,a=$(this).data("title");Swal.fire({title:"Anda yakin?",text:"Anda yakin ingin merubah Post dengan judul: "+a+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change!",allowOutsideClick:!1}).then((function(a){if(a.value){Swal.fire({imageUrl:base_url+"/images/loading.gif",imageHeight:300,showConfirmButton:!1,title:"Loading ...",allowOutsideClick:!1});var r=$(e).data("id"),i=$(e).data("status");$.ajax({url:base_url+"/ajax/post/status",type:"POST",data:{idPost:r,status:i,_method:"patch"},dataType:"JSON",success:function(e){Swal.fire({icon:"success",title:e.meta.message,showConfirmButton:!1,timer:2e3,allowOutsideClick:!1}).then((function(){Swal.close(),t()}))},error:function(e,t,a){if(e.responseJSON.data){var r=e.responseJSON.meta.message,i=e.responseJSON.data;Swal.fire({icon:"error",title:r+" <br>Copy error dan hubungi Programmer!",html:'<div class="alert alert-danger text-left" role="alert"><p>Error Message: <strong>'+i.message+"</strong></p><p>Error: "+i.error.errorInfo+"</p></div>",allowOutsideClick:!1})}else{var l=e.responseJSON.errors,n=(r=e.responseJSON.message,"");$.each(l,(function(e,t){n+="<li>"+t+"</li>"})),Swal.fire({icon:"error",title:r,html:'<div class="alert alert-danger text-left" role="alert"><ul>'+n+"</ul></div>",footer:"Pastikan data yang anda masukkan sudah benar!",allowOutsideClick:!1})}}})}}))})),$("#table-posts").on("click",".btn-delete",(function(){var e=this,a=$(this).data("title");Swal.fire({title:"Anda yakin?",text:"Anda yakin ingin menghapus Post dengan judul: "+a+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",allowOutsideClick:!1}).then((function(a){if(a.value){Swal.fire({imageUrl:base_url+"/images/loading.gif",imageHeight:300,showConfirmButton:!1,title:"Loading ...",allowOutsideClick:!1});var r=$(e).data("id"),i=base_url+"/post/"+r+"/delete";$.ajax({url:i,type:"POST",data:{_method:"delete"},dataType:"JSON",success:function(e){Swal.fire({icon:"success",title:e.data.message,showConfirmButton:!1,timer:2e3,allowOutsideClick:!1}).then((function(){t()}))},error:function(e,t,a){var r=e.responseJSON;if(r.meta)var i=r.meta.message;else i=r.message;Swal.fire({icon:"error",title:i,showConfirmButton:!1,timer:2e3,allowOutsideClick:!1})}})}}))}))}));
//# sourceMappingURL=post.js.map