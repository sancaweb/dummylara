{"version":3,"sources":["webpack:///./resources/js/pages/editPage.js"],"names":["$","ajaxSetup","headers","attr","fn","modal","Constructor","prototype","_enforceFocus","tinymce","init","height","selector","plugins","toolbar","file_picker_callback","callback","value","meta","x","window","innerWidth","document","documentElement","clientWidth","getElementsByTagName","y","innerHeight","clientHeight","cmsURL","fieldname","filetype","tinyMCE","activeEditor","windowManager","openUrl","url","title","width","resizable","close_previous","onMessage","api","message","content","filemanager","publishedDate","moment","val","datetimepicker","minDate","format","sideBySide","icons","time","date","useCurrent","on","e","preventDefault","Swal","fire","imageUrl","base_url","imageHeight","showConfirmButton","allowOutsideClick","formData","FormData","ajax","type","data","contentType","processData","dataType","success","icon","timer","then","location","replace","error","jqXHR","textStatus","errorThrown","responseJSON","errorValidator","errors","li","each","key","html","footer"],"mappings":"AAAAA,GAAE,WACEA,EAAEC,UAAU,CACRC,QAAS,CACL,eAAgBF,EAAE,0BAA0BG,KAAK,cAGzDH,EAAEI,GAAGC,MAAMC,YAAYC,UAAUC,cAAgB,aAEjDC,QAAQC,KAAK,CACTC,OAAQ,OACRC,SAAU,mBACVC,QACI,+NAEJC,QACI,8MAGJC,qBAAsB,SAAUC,EAAUC,EAAOC,GAC7C,IAAIC,EACAC,OAAOC,YACPC,SAASC,gBAAgBC,aACzBF,SAASG,qBAAqB,QAAQ,GAAGD,YACzCE,EACAN,OAAOO,aACPL,SAASC,gBAAgBK,cACzBN,SAASG,qBAAqB,QAAQ,GAAGG,aAEzCC,EAAS,uBAAyBX,EAAKY,UACtB,SAAjBZ,EAAKa,SACLF,GAAkB,eAElBA,GAAkB,cAGtBG,QAAQC,aAAaC,cAAcC,QAAQ,CACvCC,IAAKP,EACLQ,MAAO,cACPC,MAAW,GAAJnB,EACPR,OAAY,GAAJe,EACRa,UAAW,MACXC,eAAgB,KAChBC,UAAW,SAACC,EAAKC,GACb3B,EAAS2B,EAAQC,eAMjC5C,EAAE,cAAc6C,YAAY,SAE5B,IAAIC,EAAgBC,OAAO/C,EAAE,uBAAuBgD,MAAO,CACvD,sBACA,wBAGJhD,EAAE,mBAAmBiD,eAAe,CAChCC,QAASH,SAASI,OAAO,uBACzBC,YAAY,EACZC,MAAO,CACHC,KAAM,eACNC,KAAM,uBAEVA,KAAMT,EACNK,OAAQ,sBACRK,YAAY,IAGhBxD,EAAE,aAAayD,GAAG,UAAU,SAAUC,GAClCA,EAAEC,iBACFC,KAAKC,KAAK,CACNC,SAAUC,SAAW,sBACrBC,YAAa,IACbC,mBAAmB,EACnB5B,MAAO,cACP6B,mBAAmB,IAEvB,IAAIC,EAAW,IAAIC,SAASpE,EAAE,aAAa,IACvCoC,EAAMpC,EAAE,aAAaG,KAAK,UAC9BH,EAAEqE,KAAK,CACHjC,IAAKA,EACLkC,KAAM,OACNC,KAAMJ,EACNK,aAAa,EACbC,aAAa,EACbC,SAAU,OACVC,QAAS,SAAUJ,GACfX,KAAKC,KAAK,CACNe,KAAM,UACNvC,MAAOkC,EAAKrD,KAAKyB,QACjBsB,mBAAmB,EACnBY,MAAO,IACPX,mBAAmB,IACpBY,MAAK,WACJ1D,OAAO2D,SAASC,QAAQ,aAGhCC,MAAO,SAAUC,EAAOC,EAAYC,GAChC,GAAIF,EAAMG,aAAad,KAAKe,eAAgB,CACxC,IAAIC,EAASL,EAAMG,aAAad,KAAKe,eACjC3C,EAAUuC,EAAMG,aAAa1C,QAC7B6C,EAAK,GACTxF,EAAEyF,KAAKF,GAAQ,SAAUG,EAAKzE,GAC1BuE,GAAM,OAASvE,EAAQ,WAG3B2C,KAAKC,KAAK,CACNe,KAAM,QACNvC,MAAOM,EACPgD,KACI,8DAEAH,EAFA,cAKJI,OAAQ,gDACR1B,mBAAmB,EACnBD,mBAAmB,QAEpB,CACCtB,EAAUuC,EAAMG,aAAanE,KAAKyB,QAAtC,IACI4B,EAAOW,EAAMG,aAAad,KAE9BX,KAAKC,KAAK,CACNe,KAAM,QACNvC,MACIM,EAAU,0CACdgD,KACI,oFAEAhD,EAFA,0BAKA4B,EAAKU,MALL,aAQJf,mBAAmB,EACnBD,mBAAmB","file":"/js/pages/editPage.js","sourcesContent":["$(function () {\n    $.ajaxSetup({\n        headers: {\n            \"X-CSRF-TOKEN\": $('meta[name=\"csrf-token\"').attr(\"content\"),\n        },\n    });\n    $.fn.modal.Constructor.prototype._enforceFocus = function () {};\n\n    tinymce.init({\n        height: \"1000\",\n        selector: \"textarea#content\", // Replace this CSS selector to match the placeholder element for TinyMCE\n        plugins:\n            \"advlist code table lists autolink link image charmap preview anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking save table directionality emoticons template\",\n\n        toolbar:\n            \"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | \" +\n            \"bullist numlist outdent indent | link image | print preview media fullscreen | \" +\n            \"forecolor backcolor emoticons | help\",\n        file_picker_callback: function (callback, value, meta) {\n            var x =\n                window.innerWidth ||\n                document.documentElement.clientWidth ||\n                document.getElementsByTagName(\"body\")[0].clientWidth;\n            var y =\n                window.innerHeight ||\n                document.documentElement.clientHeight ||\n                document.getElementsByTagName(\"body\")[0].clientHeight;\n\n            var cmsURL = \"/filemanager?editor=\" + meta.fieldname;\n            if (meta.filetype == \"image\") {\n                cmsURL = cmsURL + \"&type=Images\";\n            } else {\n                cmsURL = cmsURL + \"&type=Files\";\n            }\n\n            tinyMCE.activeEditor.windowManager.openUrl({\n                url: cmsURL,\n                title: \"Filemanager\",\n                width: x * 0.8,\n                height: y * 0.8,\n                resizable: \"yes\",\n                close_previous: \"no\",\n                onMessage: (api, message) => {\n                    callback(message.content);\n                },\n            });\n        },\n    });\n\n    $(\"#inputFoto\").filemanager(\"image\");\n\n    let publishedDate = moment($(\"#inputPublishedDate\").val(), [\n        \"DD-MM-YYYY HH:mm:ss\",\n        \"YYYY-MM-DD HH:mm:ss\",\n    ]);\n\n    $(\"#published_date\").datetimepicker({\n        minDate: moment().format(\"YYYY-MM-DD HH:mm:ss\"),\n        sideBySide: true,\n        icons: {\n            time: \"far fa-clock\",\n            date: \"far fa-calendar-alt\",\n        },\n        date: publishedDate,\n        format: \"DD-MM-YYYY HH:mm:ss\",\n        useCurrent: false,\n    });\n\n    $(\"#formPage\").on(\"submit\", function (e) {\n        e.preventDefault();\n        Swal.fire({\n            imageUrl: base_url + \"/images/loading.gif\",\n            imageHeight: 300,\n            showConfirmButton: false,\n            title: \"Loading ...\",\n            allowOutsideClick: false,\n        });\n        var formData = new FormData($(\"#formPage\")[0]);\n        var url = $(\"#formPage\").attr(\"action\");\n        $.ajax({\n            url: url,\n            type: \"POST\",\n            data: formData,\n            contentType: false,\n            processData: false,\n            dataType: \"JSON\",\n            success: function (data) {\n                Swal.fire({\n                    icon: \"success\",\n                    title: data.meta.message,\n                    showConfirmButton: false,\n                    timer: 2000,\n                    allowOutsideClick: false,\n                }).then(function () {\n                    window.location.replace(\"/page\");\n                });\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                if (jqXHR.responseJSON.data.errorValidator) {\n                    var errors = jqXHR.responseJSON.data.errorValidator;\n                    var message = jqXHR.responseJSON.message;\n                    var li = \"\";\n                    $.each(errors, function (key, value) {\n                        li += \"<li>\" + value + \"</li>\";\n                    });\n\n                    Swal.fire({\n                        icon: \"error\",\n                        title: message,\n                        html:\n                            '<div class=\"alert alert-danger text-left\" role=\"alert\">' +\n                            \"<ul>\" +\n                            li +\n                            \"</ul>\" +\n                            \"</div>\",\n                        footer: \"Pastikan data yang anda masukkan sudah benar!\",\n                        allowOutsideClick: false,\n                        showConfirmButton: true,\n                    });\n                } else {\n                    var message = jqXHR.responseJSON.meta.message;\n                    var data = jqXHR.responseJSON.data;\n\n                    Swal.fire({\n                        icon: \"error\",\n                        title:\n                            message + \" <br>Copy error dan hubungi Programmer!\",\n                        html:\n                            '<div class=\"alert alert-danger text-left\" role=\"alert\">' +\n                            \"<p>Error Message: <strong>\" +\n                            message +\n                            \"</strong></p>\" +\n                            \"<p>Error: \" +\n                            data.error +\n                            \"</p>\" +\n                            \"</div>\",\n                        allowOutsideClick: false,\n                        showConfirmButton: true,\n                    });\n                }\n            },\n        });\n    });\n}); // ./end document\n"],"sourceRoot":""}